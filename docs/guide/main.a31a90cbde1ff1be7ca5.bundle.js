(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{224:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.fetchSchemaPaths=exports.orderSchema=exports.taskModel=exports.taskSchema=exports.field=exports.fieldset=exports.integer=exports.number=exports.string=exports.boolean=exports.array=exports.object=exports.buildDefinition=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(149)),_jsonSchemaWalker=__webpack_require__(365),_lodash=__webpack_require__(364),buildDefinition=function buildDefinition(type,payload){return(0,_objectSpread2.default)({type:type},payload)};exports.buildDefinition=buildDefinition;var object=function object(payload){return buildDefinition("object",payload)};exports.object=object;var array=function array(payload){return buildDefinition("array",payload)};exports.array=array;var boolean=function boolean(payload){return buildDefinition("boolean",payload)};exports.boolean=boolean;var string=function string(payload){return buildDefinition("string",payload)};exports.string=string;var number=function number(payload){return buildDefinition("number",payload)};exports.number=number;var integer=function integer(payload){return buildDefinition("integer",payload)};exports.integer=integer;var fieldset=function fieldset(datatype){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return buildDefinition("fieldset",(0,_objectSpread2.default)({datatype:datatype},payload))};exports.fieldset=fieldset;var field=function field(datatype){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return buildDefinition("field",(0,_objectSpread2.default)({datatype:datatype},payload))};exports.field=field;var taskSchema=object({title:"A list of tasks",required:["title"],properties:{title:string({title:"Task list title"}),tasks:array({title:"Tasks",items:object({required:["title"],properties:{title:string({title:"Title",description:"A sample title"}),details:string({title:"Task details",description:"Enter the task details"}),done:boolean({title:"Done?",default:!1})}})})}});exports.taskSchema=taskSchema;var taskModel=fieldset("object",{pointer:"#/",title:"A list of tasks",children:[field("string",{pointer:"#/properties/title",name:"title",title:"Task list title"}),fieldset("array",{pointer:"#/properties/tasks",name:"tasks",title:"Tasks",children:[fieldset("object",{pointer:"#/properties/tasks/items",name:"items",children:[field("string",{pointer:"#/properties/tasks/items/properties/title",name:"title",title:"Title",description:"A sample title"}),field("string",{pointer:"#/properties/tasks/items/properties/details",name:"details",title:"Task details",description:"Enter the task details"}),field("boolean",{pointer:"#/properties/tasks/items/properties/done",name:"done",title:"Done?",default:!1})]})]})]});exports.taskModel=taskModel;var orderSchema=object({$schema:"http://json-schema.org/schema#",properties:{orderNumber:string(),orderDate:string(),customer:object({properties:{customerNumber:string(),firstName:string(),lastName:string()}}),orderItems:array({items:object({properties:{productNumber:string(),quantity:integer(),unitPrice:integer()}})}),shippingAddress:object({properties:{street:string(),city:string(),country:string(),zip:string()}}),totalPrice:number()}});exports.orderSchema=orderSchema;exports.fetchSchemaPaths=function fetchSchemaPaths(schema){var schemaPaths=[];return(0,_jsonSchemaWalker.schemaWalk)(schema,function(schemaObject,path,parentSchemaObject,parentPath){schemaPaths.push({type:schemaObject.type,path:path,parentPath:parentPath,fullPath:(0,_lodash.concat)(parentPath,path)})}),schemaPaths}},362:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(99),_interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.DragBox=exports.DropBox=exports.EditorFormPart=exports.default=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(149)),_slicedToArray2=_interopRequireDefault(__webpack_require__(848)),_objectWithoutProperties2=_interopRequireDefault(__webpack_require__(368)),_react=_interopRequireWildcard(__webpack_require__(1)),_immer=__webpack_require__(831),_lodashEs=__webpack_require__(367),_fannypack=__webpack_require__(102),_reactFontawesome=__webpack_require__(832),_freeSolidSvgIcons=__webpack_require__(833),_FormRoot=__webpack_require__(834);exports.default=function _default(_ref){var _ref$model=_ref.model,model=void 0===_ref$model?(0,_FormRoot.simpleFormModel)():_ref$model,_ref$prefs=_ref.prefs,prefs=void 0===_ref$prefs?{options:{}}:_ref$prefs,otherProps=(0,_objectWithoutProperties2.default)(_ref,["model","prefs"]),_useState=(0,_react.useState)(model),_useState2=(0,_slicedToArray2.default)(_useState,2),formModel=_useState2[0],setFormModel=_useState2[1],_useState3=(0,_react.useState)(prefs),_useState4=(0,_slicedToArray2.default)(_useState3,2),formPrefs=_useState4[0],setFormPrefs=_useState4[1],localTheme=(0,_FormRoot.defaultLocalTheme)(),formContext=(0,_FormRoot.defaultFormContext)((0,_immer.produce)(function(context){context.registry.FormPart=EditorFormPart,context.formModel=formModel,context.setFormModel=setFormModel,context.formPrefs=formPrefs,context.setFormPrefs=setFormPrefs}));return _react.default.createElement(_FormRoot.ContextProvider,{formContext:formContext,localTheme:localTheme},_react.default.createElement(_fannypack.Box,Object.assign({_paddingTop:"major-2",paddingLeft:"major-2",paddingRight:"major-2",color:"#121212"},otherProps),_react.default.createElement(_FormRoot.FormRoot,{rootModel:formModel})))};var EditorFormPart=function EditorFormPart(_ref2){var node=_ref2.node,path=_ref2.path,children=_ref2.children,context=(0,_react.useContext)(_FormRoot.FormContext),isSelected=path===context.formPrefs.selectedFieldset,isFieldSelected=path.includes(context.formPrefs.selectedFieldset),isActive=!context.formPrefs.selectedFieldset||isFieldSelected,pointerPrefs=(0,_objectSpread2.default)({},context.formPrefs[node.pointer]),header=node.pointer?_react.default.createElement(_fannypack.Text,null,node.title," ",_react.default.createElement(_fannypack.Text,{use:"small"},node.pointer)):null,fontSizesHeader=context.formPrefs.options.fontSizesHeader,fontSize=fontSizesHeader?fontSizesHeader[path.split(".").length]:null,rowPadding=function rowPadding(paddingPx){return{paddingLeft:"".concat(paddingPx),paddingRight:"".concat(paddingPx),marginLeft:"-".concat(paddingPx),marginRight:"-".concat(paddingPx)}};if("fieldset"===node.type)return _react.default.createElement(DropBox,{gridColumn:pointerPrefs.gridColumn,name:path,onDragOver:onDragOver,onDrop:function onDrop(event){return _onDrop(event,path)},position:"relative"},isSelected&&_react.default.createElement(_react.Fragment,null,_react.default.createElement(_fannypack.Flex,{column:!0,alignItems:"center",position:"absolute",top:"10px",left:"-50px",width:"20px"},_react.default.createElement(_reactFontawesome.FontAwesomeIcon,{icon:_freeSolidSvgIcons.faTrashAlt,size:"lg",color:"#d70004"})),_react.default.createElement(_fannypack.Flex,{column:!0,alignItems:"center",position:"absolute",top:"50%",left:"-50px",width:"20px"},_react.default.createElement(_reactFontawesome.FontAwesomeIcon,{icon:_freeSolidSvgIcons.faGripLinesVertical,size:"lg",color:"#aaaaaa"}))),_react.default.createElement(_fannypack.Box,Object.assign({},rowPadding("16px"),{onClick:function onSelectClick(event){context.setFormPrefs((0,_immer.produce)(function(formPrefs){var selectedFieldset=formPrefs.selectedFieldset===path?null:path;formPrefs.selectedFieldset=selectedFieldset})),event.stopPropagation()},backgroundColor:isSelected?"#fbd9d2":void 0}),header&&_react.default.createElement(_fannypack.Box,Object.assign({},rowPadding("16px"),{color:(0,_lodashEs.get)(pointerPrefs,"header.color"),backgroundColor:(0,_lodashEs.get)(pointerPrefs,"header.backgroundColor"),opacity:isActive?null:"0.5",pointerEvents:isActive?null:"none",paddingBottom:"8px"}),_react.default.createElement(_fannypack.Heading,{use:"h2",paddingTop:"8px",paddingBottom:"8px",fontSize:fontSize},_react.default.createElement(_react.Fragment,null,header))),children&&_react.default.createElement(_fannypack.Box,Object.assign({},rowPadding("16px"),{color:(0,_lodashEs.get)(pointerPrefs,"body.color"),backgroundColor:(0,_lodashEs.get)(pointerPrefs,"body.backgroundColor"),display:"grid",gridTemplateColumns:pointerPrefs.gridTemplateColumns,gridColumnGap:"16px",gridRowGap:"0"}),children)));if("field"===node.type)return _react.default.createElement(DragBox,{gridColumn:pointerPrefs.gridColumn,name:path,onMouseOver:function onMouseOver(event){return _onMouseOver(event,path)},onDragStart:function onDragStart(event){return _onDragStart(event,path)}},_react.default.createElement(_fannypack.Box,{paddingBottom:"16px",opacity:isActive?null:"0.5",pointerEvents:isActive?null:"none"},_react.default.createElement(_fannypack.InputField,{label:node.pointer.split("/").slice(-1)[0],defaultValue:node.pointer,readOnly:!0})));throw new Error("node.type handler not defined")};exports.EditorFormPart=EditorFormPart;var DropBox=function DropBox(_ref3){var children=_ref3.children,otherProps=(_ref3.name,(0,_objectWithoutProperties2.default)(_ref3,["children","name"]));return _react.default.createElement(_fannypack.Box,otherProps,children)};exports.DropBox=DropBox;var DragBox=function DragBox(_ref4){var children=_ref4.children,otherProps=(_ref4.name,(0,_objectWithoutProperties2.default)(_ref4,["children","name"]));return _react.default.createElement(_fannypack.Box,Object.assign({draggable:!0},otherProps),children)};exports.DragBox=DragBox;var _onDragStart=function _onDragStart(event,path){console.log("drag start:",path,event.currentTarget),event.dataTransfer.setData("path",path);var emptyImage=new Image;emptyImage.src="data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",event.dataTransfer.setDragImage(emptyImage,0,0)},onDragOver=function onDragOver(event,path){event.preventDefault()},_onDrop=function _onDrop(event,path){event.preventDefault();var data=event.dataTransfer.getData("path");console.log("drop:",path,event.currentTarget,data);var point={x:event.nativeEvent.clientX,y:event.nativeEvent.clientY},clientRect=event.currentTarget.getBoundingClientRect(),bounds={x:clientRect.x,y:clientRect.y,width:clientRect.width,height:clientRect.height};console.log("drop point and bounds:",point,bounds)},_onMouseOver=function _onMouseOver(event,path){};EditorFormPart.__docgenInfo={description:"",methods:[],displayName:"EditorFormPart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormEditor.js"]={name:"EditorFormPart",docgenInfo:EditorFormPart.__docgenInfo,path:"src/components/FormEditor.js"}),DropBox.__docgenInfo={description:"",methods:[],displayName:"DropBox"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormEditor.js"]={name:"DropBox",docgenInfo:DropBox.__docgenInfo,path:"src/components/FormEditor.js"}),DragBox.__docgenInfo={description:"",methods:[],displayName:"DragBox"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormEditor.js"]={name:"DragBox",docgenInfo:DragBox.__docgenInfo,path:"src/components/FormEditor.js"})},366:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.pretty0=exports.pretty1=exports.pretty=exports.PrettyCode=void 0;var _objectWithoutProperties2=_interopRequireDefault(__webpack_require__(368)),_react=_interopRequireDefault(__webpack_require__(1)),PrettyCode=function PrettyCode(_ref){var value=_ref.value,_ref$indent=_ref.indent,indent=void 0===_ref$indent?2:_ref$indent,otherProps=(0,_objectWithoutProperties2.default)(_ref,["value","indent"]);return _react.default.createElement("pre",Object.assign({style:{margin:"25px",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"#000",fontSize:"13px"}},otherProps),_react.default.createElement("code",null,pretty(value,indent)))};exports.PrettyCode=PrettyCode;var pretty=function pretty(value){var indent=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return JSON.stringify(value,void 0,indent)};exports.pretty=pretty;exports.pretty1=function pretty1(value){return pretty(value,1).split("\n").map(function(it){return it.trim()}).join(" ")};exports.pretty0=function pretty0(value){return pretty(value,0)},PrettyCode.__docgenInfo={description:"",methods:[],displayName:"PrettyCode"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/library/utils.js"]={name:"PrettyCode",docgenInfo:PrettyCode.__docgenInfo,path:"src/library/utils.js"})},376:function(module,exports,__webpack_require__){__webpack_require__(377),__webpack_require__(455),module.exports=__webpack_require__(456)},456:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(175),_theming=__webpack_require__(526);(0,_react.addParameters)({options:{name:"monomodel",theme:_theming.themes.light,showPanel:!1,sortStoriesByKind:!0,sidebarAnimations:!1,isToolshown:!0}}),(0,_react.configure)(function loadStories(){var req=__webpack_require__(610);req.keys().forEach(function(filename){return req(filename)})},module)}).call(this,__webpack_require__(33)(module))},610:function(module,exports,__webpack_require__){var map={"./builder.story.js":611,"./editor.story.js":839};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=610},611:function(module,exports,__webpack_require__){"use strict";(function(module){var _interopRequireDefault=__webpack_require__(51),_react=__webpack_require__(99)(__webpack_require__(1)),_react2=__webpack_require__(175),_fannypack=__webpack_require__(102),_FormEditor=_interopRequireDefault(__webpack_require__(362)),_builder=__webpack_require__(837),_model=__webpack_require__(224),stories=(0,_react2.storiesOf)("components/builder",module);stories.addDecorator(function(story){return _react.default.createElement(_fannypack.ThemeProvider,null,_react.default.createElement(_fannypack.Box,{backgroundColor:"#f7f7f8",paddingLeft:"major-5",paddingRight:"major-5",paddingBottom:"major-5"},story()))}),stories.add("flat fieldsets",function(){var formPrefs=createFormPrefs(),formModel=(0,_builder.buildFlatModel)(orderSchema);return _react.default.createElement(_fannypack.Box,{marginLeft:"major-4",marginRight:"major-1",border:"1px solid #cccccc",borderTop:"none",backgroundColor:"white"},_react.default.createElement(_FormEditor.default,{model:formModel,prefs:formPrefs}))}),stories.add("nested fieldsets",function(){var formPrefs=createFormPrefs(),formModel=(0,_builder.buildModel)(orderSchema);return _react.default.createElement(_fannypack.Box,{marginLeft:"major-4",marginRight:"major-1",border:"1px solid #cccccc",borderTop:"none",backgroundColor:"white"},_react.default.createElement(_FormEditor.default,{model:formModel,prefs:formPrefs}))});var createFormPrefs=function createFormPrefs(){return{options:{},"#/":{},"#/properties/customer":{gridTemplateColumns:"repeat(2, 1fr)"},"#/properties/customer/properties/customerNumber":{gridColumn:"span 1"},"#/properties/customer/properties/firstName":{gridColumn:"1 / span 1"},"#/properties/customer/properties/lastName":{gridColumn:"span 1"},"#/properties/orderItems":{},"#/properties/orderItems/items":{gridTemplateColumns:"repeat(2, 1fr)"},"#/properties/shippingAddress":{gridTemplateColumns:"repeat(2, 1fr)"}}},orderSchema=(0,_model.object)({$schema:"http://json-schema.org/schema#",title:"order",properties:{orderNumber:(0,_model.string)(),orderDate:(0,_model.string)(),customer:(0,_model.object)({title:"customer",properties:{customerNumber:(0,_model.string)(),firstName:(0,_model.string)(),lastName:(0,_model.string)()}}),orderItems:(0,_model.array)({title:"items",items:(0,_model.object)({title:"item",properties:{productNumber:(0,_model.string)(),quantity:(0,_model.integer)(),unitPrice:(0,_model.integer)()}})}),shippingAddress:(0,_model.object)({title:"address",properties:{street:(0,_model.string)(),city:(0,_model.string)(),country:(0,_model.string)(),zip:(0,_model.string)()}}),totalPrice:(0,_model.number)()}});(0,_model.object)({title:"order",properties:{orderNumber:(0,_model.string)(),orderDate:(0,_model.string)(),customer:(0,_model.object)({title:"customer",properties:{customerNumber:(0,_model.string)(),firstName:(0,_model.string)(),lastName:(0,_model.string)()}})}})}).call(this,__webpack_require__(33)(module))},834:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(99),_interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.simpleFormModel=exports.field=exports.fieldset=exports.buildDefinition=exports.buildFormModel=exports.localTheme=exports.defaultLocalTheme=exports.defaultFormContext=exports.ContextProvider=exports.FormContext=exports.createFormPartType=exports.FormPart=exports.FormArray=exports.FormObject=exports.FormRoot=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(149)),_taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(363)),_react=_interopRequireWildcard(__webpack_require__(1)),_fannypack=__webpack_require__(102),_lodashEs=__webpack_require__(367);function _templateObject4(){var data=(0,_taggedTemplateLiteral2.default)(['\n      font-family: "open sans";\n      font-size: 14px;\n      line-height: unset;\n      border: 1px solid #cccccc !important;\n      border-radius: 0;\n      box-shadow: unset !important;\n      height: 40px;\n      padding: 0 15px;\n    ']);return _templateObject4=function _templateObject4(){return data},data}function _templateObject3(){var data=(0,_taggedTemplateLiteral2.default)(['\n      font-family: "open sans condensed";\n      font-size: 16px;\n    ']);return _templateObject3=function _templateObject3(){return data},data}function _templateObject2(){var data=(0,_taggedTemplateLiteral2.default)(['\n      font-family: "open sans condensed";\n      font-size: 20px;\n      line-height: unset;\n      & small {\n        font-size: 14px;\n        font-family: "open sans";\n        font-weight: normal;\n      }\n    ']);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=(0,_taggedTemplateLiteral2.default)(['\n      font-family: "open sans";\n      border-radius: 0;\n    ']);return _templateObject=function _templateObject(){return data},data}__webpack_require__(835),__webpack_require__(836);var FormRoot=function FormRoot(_ref){var rootModel=_ref.rootModel,_ref$rootView=_ref.rootView,rootView=void 0===_ref$rootView?null:_ref$rootView,_useContext=(0,_react.useContext)(FormContext),registry=_useContext.registry,queryComponent=_useContext.queryComponent;return _react.default.createElement(_fannypack.Box,{use:rootView||queryComponent(registry,"FormObject",rootModel),node:rootModel,path:"root"})};exports.FormRoot=FormRoot;var FormObject=function FormObject(_ref2){var node=_ref2.node,path=_ref2.path,_useContext2=(0,_react.useContext)(FormContext),registry=_useContext2.registry,queryComponent=_useContext2.queryComponent;return _react.default.createElement(_fannypack.Box,{use:queryComponent(registry,"FormPart",node),node:node,path:path},node.children&&_react.default.createElement(_fannypack.Box,{use:queryComponent(registry,"FormArray",node.children),items:node.children,path:"".concat(path,".children")}))};exports.FormObject=FormObject;var FormArray=function FormArray(_ref3){var items=_ref3.items,path=_ref3.path,_useContext3=(0,_react.useContext)(FormContext),registry=_useContext3.registry,queryComponent=_useContext3.queryComponent;return items.map(function(item,index){return _react.default.createElement(_react.Fragment,{key:index},_react.default.createElement(_fannypack.Box,{use:queryComponent(registry,"FormObject",item),node:item,path:"".concat(path,"[").concat(index,"]")}))})};exports.FormArray=FormArray;var FormPart=function FormPart(_ref4){var node=_ref4.node,path=_ref4.path,children=_ref4.children;return _react.default.createElement(_fannypack.Box,null,_react.default.createElement(_fannypack.Box,{margin:"major-1",padding:"major-1",backgroundColor:"danger",color:"white"},_react.default.createElement(_fannypack.Text,null,"Error: ",_react.default.createElement(_fannypack.Code,null,"<FormPart>")," for type"," ",_react.default.createElement(_fannypack.Code,null,createFormPartType(node.type,node.datatype))," at path"," ",_react.default.createElement(_fannypack.Code,null,path)," not found.")),_react.default.createElement(_fannypack.Box,null,children))};exports.FormPart=FormPart;var createFormPartType=function createFormPartType(){for(var _len=arguments.length,types=new Array(_len),_key=0;_key<_len;_key++)types[_key]=arguments[_key];return(0,_lodashEs.compact)(types).join("-").toLowerCase()};exports.createFormPartType=createFormPartType;var FormContext=_react.default.createContext(null);exports.FormContext=FormContext;var ContextProvider=function ContextProvider(_ref5){var _ref5$localTheme=_ref5.localTheme,localTheme=void 0===_ref5$localTheme?null:_ref5$localTheme,_ref5$formContext=_ref5.formContext,formContext=void 0===_ref5$formContext?null:_ref5$formContext,children=_ref5.children;return _react.default.createElement(_fannypack.ThemeProvider,{theme:localTheme},_react.default.createElement(FormContext.Provider,{value:formContext},_react.default.createElement(_react.Fragment,null,children)))};exports.ContextProvider=ContextProvider;exports.defaultFormContext=function defaultFormContext(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(context){return context})({registry:{FormObject:FormObject,FormArray:FormArray,FormPart:FormPart},queryComponent:function queryComponent(registry,name,data){return registry[name]}})};exports.defaultLocalTheme=function defaultLocalTheme(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(theme){return theme})(localTheme)};var localTheme={Pane:{base:(0,_fannypack.css)(_templateObject())},Heading:{h2:(0,_fannypack.css)(_templateObject2())},Label:{base:(0,_fannypack.css)(_templateObject3())},Input:{base:(0,_fannypack.css)(_templateObject4())}};exports.localTheme=localTheme;exports.buildFormModel=function buildFormModel(definitionFn){return definitionFn({fieldset:fieldset,field:field})};var buildDefinition=function buildDefinition(type,payload){return(0,_objectSpread2.default)({type:type},payload)};exports.buildDefinition=buildDefinition;var fieldset=function fieldset(datatype){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return buildDefinition("fieldset",(0,_objectSpread2.default)({datatype:datatype},payload))};exports.fieldset=fieldset;var field=function field(datatype){var payload=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return buildDefinition("field",(0,_objectSpread2.default)({datatype:datatype},payload))};exports.field=field;exports.simpleFormModel=function simpleFormModel(){return fieldset("object",{pointer:"#/",title:"order",children:[field("string",{pointer:"#/properties/orderNumber"}),field("string",{pointer:"#/properties/orderDate"}),fieldset("object",{pointer:"#/properties/customer",title:"customer",children:[field("string",{pointer:"#/properties/customer/properties/customerNumber"}),field("string",{pointer:"#/properties/customer/properties/firstName"}),field("string",{pointer:"#/properties/customer/properties/lastName"})]})]})},FormRoot.__docgenInfo={description:"",methods:[],displayName:"FormRoot"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormRoot.js"]={name:"FormRoot",docgenInfo:FormRoot.__docgenInfo,path:"src/components/FormRoot.js"}),FormObject.__docgenInfo={description:"",methods:[],displayName:"FormObject"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormRoot.js"]={name:"FormObject",docgenInfo:FormObject.__docgenInfo,path:"src/components/FormRoot.js"}),FormPart.__docgenInfo={description:"",methods:[],displayName:"FormPart"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormRoot.js"]={name:"FormPart",docgenInfo:FormPart.__docgenInfo,path:"src/components/FormRoot.js"}),ContextProvider.__docgenInfo={description:"",methods:[],displayName:"ContextProvider"},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/FormRoot.js"]={name:"ContextProvider",docgenInfo:ContextProvider.__docgenInfo,path:"src/components/FormRoot.js"})},837:function(module,exports,__webpack_require__){"use strict";var _interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.traverseSchema=exports.toObjectPath=exports.toPointer=exports.isRootPointer=exports.isFieldsetType=exports.buildModel=exports.buildFlatModel=void 0;var _objectSpread2=_interopRequireDefault(__webpack_require__(149)),_lodash=__webpack_require__(364),_jsonSchemaWalker=__webpack_require__(365),_model=__webpack_require__(224);__webpack_require__(366);exports.buildFlatModel=function buildFlatModel(schema){var registry={fieldsetIndex:-1,fieldIndex:-1,currentParentPointer:null},model=(0,_model.fieldset)("array");return traverseSchema(schema,function(object,parentObject){var pointer=toPointer((0,_lodash.concat)(parentObject.path,object.path)),parentPointer=toPointer(parentObject.path),type=object.schema.type;if(!isFieldsetType(type)&&parentPointer!==registry.currentParentPointer){registry.fieldsetIndex+=1,registry.fieldIndex=-1,registry.currentParentPointer=parentPointer;var _objectPathSegments=[];_objectPathSegments.push("children[".concat(registry.fieldsetIndex,"]"));var _objectPath=toObjectPath(_lodash.concat.apply(void 0,_objectPathSegments)),payload=(0,_lodash.pick)(parentObject.schema,["title"]),node=(0,_model.fieldset)(parentObject.schema.type,(0,_objectSpread2.default)({pointer:parentPointer},payload));(0,_lodash.set)(model,_objectPath,node)}isFieldsetType(type)?(registry.fieldsetIndex+=1,registry.fieldIndex=-1,registry.currentParentPointer=pointer):registry.fieldIndex+=1;var objectPathSegments=[];objectPathSegments.push("children[".concat(registry.fieldsetIndex,"]")),isFieldsetType(type)||objectPathSegments.push("children[".concat(registry.fieldIndex,"]"));var objectPath=toObjectPath(_lodash.concat.apply(void 0,objectPathSegments));if(isFieldsetType(type)){var _payload=(0,_lodash.pick)(object.schema,["title"]),_node=(0,_model.fieldset)(type,(0,_objectSpread2.default)({pointer:pointer},_payload));(0,_lodash.set)(model,objectPath,_node)}else{var _payload2=(0,_lodash.pick)(object.schema,["title"]),_node2=(0,_model.field)(type,(0,_objectSpread2.default)({pointer:pointer},_payload2));(0,_lodash.set)(model,objectPath,_node2)}}),model};exports.buildModel=function buildModel(schema){var registry={},model={};return traverseSchema(schema,function(object,parentObject){var pointer=toPointer((0,_lodash.concat)(parentObject.path,object.path)),parentPointer=toPointer(parentObject.path),type=object.schema.type;isRootPointer(pointer,parentPointer)?registry[pointer]={parentPointer:null,path:null,index:0,nextChildIndex:0}:(registry[pointer]={parentPointer:parentPointer,path:object.path,index:registry[parentPointer].nextChildIndex,nextChildIndex:0},registry[parentPointer].nextChildIndex+=1);for(var rewritePathSegment=function rewritePathSegment(_ref){var path=_ref.path,index=_ref.index;return path?["children",index]:[]},objectPathSegments=[],currentEntry=registry[pointer];currentEntry;)objectPathSegments.unshift(rewritePathSegment(currentEntry)),currentEntry=registry[currentEntry.parentPointer];var objectPath=toObjectPath(_lodash.concat.apply(void 0,objectPathSegments)),rootObjectPath=objectPath?"root."+objectPath:"root";if(isFieldsetType(type)){var payload=(0,_lodash.pick)(object.schema,["title"]),node=(0,_model.fieldset)(type,(0,_objectSpread2.default)({pointer:pointer},payload));(0,_lodash.set)(model,rootObjectPath,node)}else{var _payload3=(0,_lodash.pick)(object.schema,["title"]),_node3=(0,_model.field)(type,(0,_objectSpread2.default)({pointer:pointer},_payload3));(0,_lodash.set)(model,rootObjectPath,_node3)}}),model.root};var isFieldsetType=function isFieldsetType(type){return"object"===type||"array"===type};exports.isFieldsetType=isFieldsetType;var isRootPointer=function isRootPointer(pointer,parentPointer){return pointer===parentPointer};exports.isRootPointer=isRootPointer;var toPointer=function toPointer(pathSegments){return"#/".concat(pathSegments.join("/"))};exports.toPointer=toPointer;var toObjectPath=function toObjectPath(pathSegments){return pathSegments.join(".")};exports.toObjectPath=toObjectPath;var traverseSchema=function traverseSchema(schema,visitFn){(0,_jsonSchemaWalker.schemaWalk)(schema,function(schemaObject,path,parentSchemaObject,parentPath){visitFn({schema:schemaObject,path:path},{schema:parentSchemaObject,path:parentPath})})};exports.traverseSchema=traverseSchema},839:function(module,exports,__webpack_require__){"use strict";(function(module){var _interopRequireDefault=__webpack_require__(51),_react=__webpack_require__(99)(__webpack_require__(1)),_react2=__webpack_require__(175),_fannypack=__webpack_require__(102),_FormEditor=_interopRequireDefault(__webpack_require__(362)),_SchemaEditor=_interopRequireDefault(__webpack_require__(840)),stories=(0,_react2.storiesOf)("components/editor",module);stories.addDecorator(function(story){return _react.default.createElement(_fannypack.ThemeProvider,null,_react.default.createElement(_fannypack.Box,{padding:"major-6",background:"#f7f7f8"},story()))}),stories.add("form editor",function(){return _react.default.createElement(_fannypack.Box,{padding:"0",background:"#ffffff",border:"1px solid #cccccc"},_react.default.createElement(_FormEditor.default,null))}),stories.add("schema editor",function(){return _react.default.createElement(_fannypack.Box,{padding:"major-3",background:"#ffffff",border:"1px solid #cccccc"},_react.default.createElement(_SchemaEditor.default,null))})}).call(this,__webpack_require__(33)(module))},840:function(module,exports,__webpack_require__){"use strict";var _interopRequireWildcard=__webpack_require__(99),_interopRequireDefault=__webpack_require__(51);Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(__webpack_require__(7)),_taggedTemplateLiteral2=_interopRequireDefault(__webpack_require__(363)),_react=_interopRequireDefault(__webpack_require__(1)),_fannypack=__webpack_require__(102),_styledComponents=_interopRequireWildcard(__webpack_require__(5)),_reactCodemirror=__webpack_require__(841);__webpack_require__(842),__webpack_require__(843),__webpack_require__(844);var _utils=__webpack_require__(366),_model=__webpack_require__(224);function _templateObject(){var data=(0,_taggedTemplateLiteral2.default)(['\n  .CodeMirror {\n    height: auto;\n    font-family: Menlo, Monaco, "Courier New", monospace;\n    font-size: 14px;\n    line-height: 1.25;\n  }\n']);return _templateObject=function _templateObject(){return data},data}var styles=(0,_styledComponents.css)(_templateObject());exports.styles=styles;var _default=(0,_styledComponents.default)(function(_ref){var otherProps=(0,_extends2.default)({},_ref);return _react.default.createElement(_fannypack.Box,otherProps,_react.default.createElement(_reactCodemirror.UnControlled,{value:(0,_utils.pretty)(_model.orderSchema,1),options:{mode:{name:"javascript",jsonld:!0},keyMap:"vim",lineNumbers:!1,_readOnly:"nocursor",viewportMargin:1/0}}))})(styles);exports.default=_default}},[[376,1,2]]]);
//# sourceMappingURL=main.a31a90cbde1ff1be7ca5.bundle.js.map